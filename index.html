<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alcohol Risks Calculator</title>
  <style>
    :root { --bg:#0b0f14; --card:#121822; --text:#e8eef7; --muted:#9fb2c8; --accent:#6ee7ff; }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);margin:0;display:grid;place-items:center;min-height:100vh;padding:24px}
    .card{background:var(--card);border:1px solid #1f2a38;border-radius:16px;max-width:760px;width:100%;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{font-size:1.25rem;margin:0 0 12px}
    p.hint{color:var(--muted);margin-top:0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    label{font-size:.9rem;color:var(--muted)}
    input[type="number"]{width:100%;padding:10px;border-radius:10px;border:1px solid #253243;background:#0e141d;color:var(--text)}
    input[type="checkbox"]{transform:translateY(1px)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .divider{height:1px;background:#1f2a38;margin:14px 0}
    .btn{appearance:none;background:#1a2533;color:var(--text);border:1px solid #2a3a50;border-radius:10px;padding:10px 14px;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,#1ddde2,#5cc4ff);color:#00222b;border:0;font-weight:700}
    .result{font-size:1.1rem;margin-top:10px}
    .muted{color:var(--muted)}
    .right{justify-content:flex-end}
    .small{font-size:.85rem}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
p{ margin: 0; }
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#0e141d;border:1px solid #253243;font-size:.8rem;color:var(--muted)}
    .alert{border:1px solid #3b2a2a;background:#201416;color:#ffd9d9;border-radius:12px;padding:10px}.alert strong{color:#ffb3b3}
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>Alcohol calculator</h1>
    <p class="hint">Uses the Japan case–control study heuristic (10 drink‑years ≈ 5% higher <em>overall</em> cancer odds). Very simple and does NOT adjust for other potential factors. Study source: <a href="https://pubmed.ncbi.nlm.nih.gov/31814116/" rel="noopener" target="_blank">PubMed: 31814116</a>.</p>

    <form id="calc" onsubmit="event.preventDefault(); compute();">
      <div class="grid">
        <div>
          <label for="vol">Volume (mL)</label>
          <input id="vol" type="number" inputmode="decimal" min="0" step="0.1" placeholder="e.g. 354" required />
        </div>
        <div>
          <label for="abv">ABV (%)</label>
          <input id="abv" type="number" inputmode="decimal" min="0" max="100" step="0.1" placeholder="e.g. 5" required />
        </div>
      </div>

      <div class="divider"></div>

      <div class="grid">
        <div>
          <label for="rho">Ethanol density (g/mL)</label>
          <div class="row">
            <input id="rho" type="number" inputmode="decimal" min="0" step="0.001" value="0.789" disabled aria-describedby="rhoHelp" />

          </div>
          <div id="rhoHelp" class="small muted">Default 0.789 g/mL at ~20 °C.</div>
        </div>
        <div>
          <label for="years">Exposure duration (years)</label>
          <div class="row">
<input id="years" type="number" min="0.0027" step="0.000001" value="60" />

            <span class="pill" title="Japan study heuristic"> Example: if you were drinking this drink the specified repeated drink frequency between the ages of 20 and 80, you'd enter 60. </span>
          </div>
        </div>
      </div>

      <div class="grid">
        <div>
          <label>Repeated drink frequency</label>
          <div class="row small" role="radiogroup" aria-label="pattern">
            <label><input type="radio" name="pattern" value="daily"> daily</label>
              <label><input type="radio" name="pattern" value="weekly" checked> weekly</label>
            <label><input type="radio" name="pattern" value="once"> one time</label>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="result" aria-live="polite">
        <div><strong>Per-drink ethanol grams:</strong> <span id="grams">—</span></div>
      </div>

      <div class="result" aria-live="polite" style="margin-top:8px;">
        <div><strong>Cumulative cancers risk increase for exposure duration:</strong> <span id="risk">—</span></div>
      </div>

      <div id="cypBox" class="alert small" style="margin-top:8px;" role="status" aria-live="polite">
        <strong>CYP2E1 note:</strong> Single‑sitting intakes around <strong>≥10–15 g ethanol</strong> can increase CYP2E1 activity, raising oxidative stress. <span id="cypNow"></span>
      </div>

            <div id="other" class="pattern" style="margin-top:8px;" role="status" aria-live="polite">
        <strong>Suggested/common values: </strong><p>Mini shot glass: 24 ml</p> <p>Shot glass: 44 ml</p> <p>1 ounce: 30 ml</p> <p>8 ounces: 237 ml</p> <p>10 ounces: 296 ml</p> <p>12 ounces: 354 ml</p> <p>16 ounces: 473 ml</p> <br><strong>Common values of ABV (can vary)</strong></br> <p>Beer: 5%</p> <p>Wine: 13%</p> <p>Soju: 13.5% or 20%</p> <p>Vodka: 40%</p>
      </div>


    </form>
  </main>

  <script>
    const vol = document.getElementById('vol');
    const abv = document.getElementById('abv');
    const rho = document.getElementById('rho');
    const gramsOut = document.getElementById('grams');
    const editRho = document.getElementById('editRho');

    const riskOut = document.getElementById('risk');
    const yearsEl = document.getElementById('years');

    function toNumber(el){
      const v = parseFloat(el.value);
      return Number.isFinite(v) ? v : NaN;
    }

    function gramsPerServing(){
      const V = toNumber(vol);
      const A = toNumber(abv);
      const R = toNumber(rho);
      if(!Number.isFinite(V) || !Number.isFinite(A) || !Number.isFinite(R)) return NaN;
      return V * (A/100) * R;
    }

    function drinksPerDayFromPattern(g, yrs){
      const pattern = document.querySelector('input[name="pattern"]:checked')?.value || 'daily';
      const drink = g / 23;
      if(pattern === 'daily') return drink;
      if(pattern === 'weekly') return drink / 7;

      const y = Number.isFinite(yrs) && yrs > 0 ? yrs : 1;
      return drink / (y * 365);
    }

    function compute(){
      const g = gramsPerServing();
      const yrs = toNumber(yearsEl);

      if(!Number.isFinite(g)) { gramsOut.textContent = '—'; } else { gramsOut.textContent = g.toFixed(2) + ' g'; }


      if(Number.isFinite(g) && Number.isFinite(yrs)){
        const drinksPerDay = drinksPerDayFromPattern(g, yrs);
        const drinkYears = drinksPerDay * yrs;
        const riskPct = (drinkYears / 10) * 5; // 10 drink-years ≈ 5%
        riskOut.textContent = isFinite(riskPct) ? riskPct.toFixed(2) + '% (~overall odds)' : '—';
      } else {
        riskOut.textContent = '—';
      }
    }

    [vol, abv, rho, yearsEl, ...document.querySelectorAll('input[name="pattern"]') ].forEach(el => el.addEventListener('input', compute));

    editRho.addEventListener('change', () => {
      rho.disabled = !editRho.checked;
      rho.focus();
    });

    compute();
  </script>
</body>
</html>
